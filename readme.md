# YouTube Parser
## Предпосылки
Мне иногда приходится анализировать рынок сбыта того или иного продукта.
Приходится собирать и ворочить огроммные массивы данных. В деле анализа рынка
сбыта много данных не бывает.

Однажды просматривая YouTube на интересующую меня тему, стал читать комментарии
пользователей. Среди комментариев было множетсво интересных мнений людей.
Тут я задумался, почему бы не сделать инструмент, который автоматически собирает
данные, в том числе комментарии пользователей по релевантным поисковым запросам.

Из полученных данных можно извлечь ряд полезной информации, а именно:
 - возможные вопросы "сопротивления" потенциальных клиентов;
 - мнения о возможном улучшении продукта;
 - идеи новых продуктов на основе старого;
 - помощь в оченке справедливой цены;
 - сбор знаний о конкурентах;
 - и много других идей.

## Назначение
Модуль для парсинга данных поисковой выдачи YouYube. Сбор происходит в два этапа:
1. Сбор данных поисковой выдачи по колючевому запросу. Данные формируются в
   формате `list[{dict}]`;
2. Собирает более полную информацию по каждому видео поисковой выдачи.

Модуль может работать под следующими операционными системами:
- Linux;
- Mac;
- Windows.

> ***Внимание!*** Модуль в своей работе использует **selenium** для
> имитации поведения пользователя, с целью предотвращения блокировок со
> стороны YouTube. Факт использования вышеуказанного фреймворка не может
> обеспечить большой скорости обработки поисковых запросов, а также не 
> стабильности работы. Прошу учитывать этот факт в работе. Кроме того,
> в вашей операционной системе должен быть установлен браузер Firefox.

## Установка

1. Установка через Git
   > `git clone https://github.com`
2. Либо скачать файлы модуля с с официального репозитория 
   [на GitHub](https://github.com)

## Использование
Наиболее вероятное использование модуля представляется следующим образом:
- Импрортировать модуль в свой проект
  ```py
  from ytparser import YTParser
  ```
- Создать экземпляр объекта парсера
  ``` py
  parser = YTParser()
  ```
- Запустить один из двух методов сбора данных
  1. Сбор общих данных.
    ``` py
    parser.get_common_data(query:str, depth:int=50)
    ```
    > где, **`depth`** - необязательный параметр глубины просмотра поисковой 
    выдачи. По умолчанию имеет глубину просмотра поисковой выдачи 50 видео. 
    **`query`** - обязательный параметр c поисковым запросом.

    На выходе вы получите список словарей `list[{dict}]`. Словарь имеет
    примерную структуру:
    ``` py
    {
      'position': int, # Позиция в выдаче
      'title': 'Some text', # Заголовок видео
      'query': 'query string', # Поисковый запрос
      'description': 'Video description text', #Текст с описанием видео
      'link': str, # Ссылка на видео
      'channel': str, # Назвиние канала
      'channel_link': str # Ссылка на канал
    }
    ```

  2. Сбор всех данных по поисковой фразе.
    ``` py
    parser.get_overall_data(query:str, depth:int=50, depth_comments:int=100)
    ```
    > где, **`depth`** - необязательный параметр глубины просмотра поисковой 
    выдачи. По умолчанию имеет глубину просмотра поисковой выдачи 50 видео. 
    **`query`** - обязательный параметр c поисковым запросом.
    **`depth_comments`** - параметр задающий глубину просмотра комментариев.

    Принцип работы метода:
    1. Метод собирает ссылки на видео из поисковой выдачи по ключевому запросу.
    2. Проходит по списку ссылок и собирает полные данные по видео.
  
  В качестве выходных данных, метод возвращает список словарей `list[{dict}]`. 
  Словарь имеет примерную структуру:
  ``` py
    {
      'position': int, # Позиция в выдаче
      'title': str, # Заголовок видео
      'query': str, # Поисковый запрос
      'description': str, #Текст с описанием под видео
      'link': str, # Ссылка на видео
      'views': str, # Количество просмотров
      'video_length': time, # Продолжительность видео
      'channel': str, # Назвиние канала
      'channel_link': str, # Ссылка на канал
      'release_date': datetime, # Дата выхода видео
      'likes_count': str, #Количество лайков
      'dislikes_count': str, #Количество дизлайков
      'comments_count': int, #Количество комментариев
      'comments': [
        {
          'comment_position': int # Позиция комментария в выдаче
          'commentator_name': str, # Имя комментатора
          'comment_text': str, # Текст комментария
          'comment_likes': str # Количество лайков на комментарий
        }
      ] # Список словарей комментариев
    }
    ```

### Пример
Прострейший пример использования для извлечения общих данных.
``` py
from ytparser import YTParser


requests = ('Python', 'Программирование', 'Лучший спиннинг для джига')
driver = YTParser()
for req in requests:
  print(driver.get_common_data(req, depth=100))

```